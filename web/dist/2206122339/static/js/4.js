webpackJsonp([4,8,38],{"6hE4":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("3cXf"),i=a.n(l),n=a("FAA3"),o=a("38/s"),r=a("I29D"),s=a.n(r),d={data:function(){return{visible:!1,dataForm:{faultid:0,projectid:"",projectname:"",handlername:"",selectedprojectypeid:"",equipment:"",faulttype:"",faultdesc:"",starttime:"",networkstatus:"",faultstatus:"",declarer:"",plan:"",handlerid:"",remark:"",createtime:"",declartype:""},faulttypes:[],dataRule:{projectid:[{required:!0,message:"项目ID不能为空",trigger:"blur"}],projectname:[{required:!0,message:"项目名称不能为空",trigger:["blur","change"]}],faulttype:[{required:!0,message:"故障类型ID不能为空",trigger:"blur"}],faultdesc:[{required:!0,message:"故障问题描述不能为空",trigger:"blur"}],starttime:[{required:!0,message:"故障开始时间不能为空",trigger:"blur"}],faultstatus:[{required:!0,message:"故障状态(1 创建成功，2 已取消，3 已解决)不能为空",trigger:"blur"}],declarer:[{required:!0,message:"申报人ID不能为空",trigger:"blur"}],handlerid:[{required:!0,message:"项目负责人不能为空",trigger:"blur"}],remark:[{required:!0,message:"备注不能为空",trigger:"blur"}],createtime:[{required:!0,message:"创建时间不能为空",trigger:"blur"}],declartype:[{required:!0,message:"不能为空",trigger:"blur"}]},uploadformdata:new FormData,delfileIds:[],fileList:[]}},components:{selectView:n.default,selectHostView:o.default},methods:{init:function(e){var t=this;this.getDataList(400,410,this.initAuthstatusCallback),this.dataForm.faultid=e||0,this.visible=!0,this.$nextTick(function(){t.$refs.dataForm.resetFields(),t.dataForm.faultid&&t.$http({url:t.$http.adornUrl("/fenhuo/fenhuofault/info/"+t.dataForm.faultid),method:"get",params:t.$http.adornParams()}).then(function(e){var a=e.data;a&&0===a.code&&(t.dataForm.projectid=a.fenhuoFault.projectid,t.dataForm.projectname=a.fenhuoFault.projectname,t.dataForm.selectedprojectypeid=a.fenhuoFault.projectypeid,t.dataForm.equipment=a.fenhuoFault.equipment,t.dataForm.faulttype=a.fenhuoFault.faulttype,t.dataForm.faultdesc=a.fenhuoFault.faultdesc,t.dataForm.starttime=a.fenhuoFault.starttime,t.dataForm.networkstatus=a.fenhuoFault.networkstatus,t.dataForm.faultstatus=a.fenhuoFault.faultstatus,t.dataForm.declarer=a.fenhuoFault.declarer,t.dataForm.plan=a.fenhuoFault.plan,t.dataForm.handlerid=a.fenhuoFault.handlerid,t.dataForm.remark=a.fenhuoFault.remark,t.dataForm.createtime=a.fenhuoFault.createtime,t.dataForm.declartype=a.fenhuoFault.declartype,t.faultRelatedFilelist())})})},getDataList:function(e,t,a){this.loading=!0,this.$http({url:this.$http.adornUrl("/sys/config/queryrange"),method:"get",params:this.$http.adornParams({start:e,end:t})}).then(function(e){var t=e.data;a(t)})},initAuthstatusCallback:function(e){if(e&&0===e.code){console.log(i()(e)),this.authstatus=[];var t=0;if(this.faulttypes.length>0)return;for(t in e.config)this.faulttypes.push({value:e.config[t].paramKey,label:e.config[t].paramValue})}},dataFormSubmit:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&e.$http({url:e.$http.adornUrl("/fenhuo/fenhuofault/"+(e.dataForm.faultid?"update":"save")),method:"post",data:e.$http.adornData({faultid:e.dataForm.faultid||void 0,projectid:e.dataForm.projectid,projectname:e.dataForm.projectname,hostid:e.dataForm.hostid,hostname:e.dataForm.hostname,equipment:e.dataForm.equipment,faulttype:e.dataForm.faulttype,faultdesc:e.dataForm.faultdesc,starttime:e.dataForm.starttime,networkstatus:e.dataForm.networkstatus,faultstatus:e.dataForm.faultstatus,declarer:e.dataForm.declarer,plan:e.dataForm.plan,handlerid:e.dataForm.handlerid,handlername:e.dataForm.handlername,remark:e.dataForm.remark,createtime:e.dataForm.createtime,declartype:e.dataForm.declartype})}).then(function(t){var a=t.data;a&&0===a.code?(e.submitUpload(a.faultid),e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}})):e.$message.error(a.msg)})})},selectedProjcetHandler:function(e){console.log(e),e.projectlist.projectname.length>0&&(this.dataForm.projectname=e.projectlist.projectname.join(","),this.dataForm.projectid=e.projectlist.id.join(","),this.dataForm.handlerid=e.projectlist.headerid.join(","),this.dataForm.handlername=e.projectlist.headername.join(","),this.dataForm.selectedprojectypeid=e.projectlist.projectypeid.join(","))},selectedZbxhostHandler:function(e){console.log(e),this.dataForm.equipment=e.zbxhostidlist.hostname.join(","),this.dataForm.hostid=e.zbxhostidlist.hostid.join(","),this.dataForm.hostname=e.zbxhostidlist.hostname.join(",")},deleteFileHandler:function(e,t){var a=void 0;for(a in this.fileList){var l=this.fileList[a];if(console.log("fileJson:"+i()(this.fileList[a])+",file uid:"+l.uid+", delUid:"+e),l.uid===e){this.dataForm.faultid&&"success"===l.status&&this.delfileIds.push(t);break}}a>-1&&this.fileList.splice(a,1),console.log("deleted filelist:"+i()(this.fileList))},faultRelatedFileDownload:function(e){var t=document.createElement("a"),a=this.$http.adornUrl("/fenhuo/fenhuofault/download?faultid="+this.dataForm.faultid+"&token="+this.$cookie.get("token")+"&fileName="+e);t.style.display="none",t.href=a,console.log(e),t.download=e,document.body.appendChild(t),t.click(),document.body.removeChild(t)},uploadfile:function(e){console.log(e),this.uploadformdata.append("files",e.file)},submitUpload:function(e){var t=this;this.uploadformdata=new FormData,this.$refs.upload.submit(),e?this.uploadformdata.append("deleteFiles",this.delfileIds):this.uploadformdata.append("deleteFiles",[]);s.a.post(this.$http.adornUrl("/fenhuo/fenhuofault/upload/"+e+"?token="+this.$cookie.get("token")),this.uploadformdata,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){t.fileList=[],console.log(e)}).catch(function(e){console.log(e)})},faultRelatedFilelist:function(){var e=this;this.$http({url:this.$http.adornUrl("/fenhuo/fenhuofault/faultfilelist/"+this.dataForm.faultid),method:"get"}).then(function(t){var a=t.data;a&&0===a.code?e.fileList=a.relatedfilelist:e.fileList=[]})},handlePreview:function(e){console.log("handlePreview:"+e)},onUploadStatuChange:function(e,t){this.fileList=t,console.log("onUploadStatuChange file: "+i()(e)+"!!--!!fileList: "+i()(t))},handleRemove:function(e,t){console.log("handleRemove file: "+i()(e)+"!!--!!fileList: "+i()(t))},uploadSuccess:function(e,t,a){console.log("-----------------------uploadSuccess-------------"),console.log("response:"+i()(e)),console.log("file:"+i()(t)),console.log("fileList:"+i()(a))}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.dataForm.faultid?"修改":"新增","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"80px"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.dataFormSubmit()}}},[a("el-form-item",{attrs:{label:"项目名称",prop:"projectname"}},[a("selectView",{attrs:{tabelTitle:"选择故障项目"},on:{selectedAction:e.selectedProjcetHandler}},[a("el-input",{attrs:{placeholder:"项目名称"},model:{value:e.dataForm.projectname,callback:function(t){e.$set(e.dataForm,"projectname",t)},expression:"dataForm.projectname"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"故障类型"}},[a("el-select",{ref:"faulttype",staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.dataForm.faulttype,callback:function(t){e.$set(e.dataForm,"faulttype",t)},expression:"dataForm.faulttype"}},e._l(e.faulttypes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:"600"==e.dataForm.selectedprojectypeid,expression:"dataForm.selectedprojectypeid=='600'?true:false"}]},[a("el-form-item",{attrs:{label:"故障主机",prop:"equipment"}},[a("selectHostView",{attrs:{tabelTitle:"选择故障主机",projectid:e.dataForm.projectid},on:{selectedAction:e.selectedZbxhostHandler}},[a("el-input",{attrs:{placeholder:"故障主机名称"},model:{value:e.dataForm.equipment,callback:function(t){e.$set(e.dataForm,"equipment",t)},expression:"dataForm.equipment"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"故障问题描述",prop:"faultdesc"}},[a("el-input",{attrs:{placeholder:"故障问题描述"},model:{value:e.dataForm.faultdesc,callback:function(t){e.$set(e.dataForm,"faultdesc",t)},expression:"dataForm.faultdesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"故障开始时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.dataForm.starttime,callback:function(t){e.$set(e.dataForm,"starttime",t)},expression:"dataForm.starttime"}})],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-container",[a("span",[a("h2",{staticStyle:{"line-height":"0px"}},[e._v("故障相关文件")])])])],1),e._v(" "),a("el-col",{attrs:{span:6,offset:12}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"#","on-preview":e.handlePreview,"on-change":e.onUploadStatuChange,multiple:"","on-remove":e.handleRemove,"on-success":e.uploadSuccess,"file-list":e.fileList,"show-file-list":!1,"auto-upload":!1,"http-request":e.uploadfile}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("添加文件")])],1)],1)],1),e._v(" "),a("el-divider"),e._v(" "),a("ul",{staticClass:"infinite-list",staticStyle:{overflow:"auto"}},e._l(e.fileList,function(t){return a("el-row",{key:t.uid},[a("li",{staticClass:"infinite-list-item"},[a("el-col",{attrs:{span:8,offset:1}},[a("h3",[e._v(e._s(t.name))])]),e._v(" "),a("el-col",{attrs:{span:5,offset:10}},[e.dataForm.faultid?a("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(a){e.faultRelatedFileDownload(t.name)}}},[e._v("下载")]):e._e(),e._v(" "),a("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(a){e.deleteFileHandler(t.uid,t.name)}}},[e._v("删除")])],1)],1)])})),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},staticRenderFns:[]},c=a("46Yf")(d,u,!1,null,null,null);t.default=c.exports},D2KK:function(e,t,a){(e.exports=a("acE3")(!1)).push([e.i,"\n#my-button[data-v-4bbee288]:hover{\r\n  background: #66b1ff;\r\n  border-color: #66b1ff;\r\n  color: #FFF;\n}\r\n",""])},HqUn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("6hE4"),i=a("ObGG"),n=a("qX+R"),o={data:function(){return{dataForm:{key:""},dataList:[],pageIndex:1,pageSize:10,totalPage:0,dataListLoading:!1,dataListSelections:[],addOrUpdateVisible:!1,detailVisible:!1,faultStatus:500,dialogVisible:!1,maintaindaterange:"",beginMaintainId:"",begindate:"",endate:"",faultid:"",dialogDetailVisible:!1,seletcedProjectid:"",projectmsgOptions:[]}},components:{AddOrUpdate:l.default,selectView:i.default,Detail:n.default},created:function(){this.getProjectMsgs()},methods:{getProjectMsgs:function(){var e=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/fenhuo/fenhuofault/projectslist"),method:"get",params:this.$http.adornParams({})}).then(function(t){var a=t.data;if(a&&0===a.code){for(var l in a.projectmsg)e.projectmsgOptions.push({value:a.projectmsg[l].projectid,label:a.projectmsg[l].projectname});e.seletcedProjectid=e.projectmsgOptions[0].value,console.log("this.seletcedProjectid---",e.seletcedProjectid),e.getDataList()}else e.projectmsg=[]})},getDataList:function(){var e=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/fenhuo/fenhuofault/list"),method:"get",params:this.$http.adornParams({projectid:this.seletcedProjectid,faultType:this.faultStatus,page:this.pageIndex,limit:this.pageSize,key:this.dataForm.key})}).then(function(t){var a=t.data;a&&0===a.code?(e.dataList=a.page.list,e.totalPage=a.page.totalCount,console.log("-getdataList-activated---")):(e.dataList=[],e.totalPage=0),e.dataListLoading=!1})},projectchangeHandle:function(e){this.seletcedProjectid=e,this.getDataList()},sizeChangeHandle:function(e){this.pageSize=e,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(e){this.pageIndex=e,this.getDataList()},selectionChangeHandle:function(e){this.dataListSelections=e},addOrUpdateHandle:function(e){var t=this;this.addOrUpdateVisible=!0,this.$nextTick(function(){t.$refs.addOrUpdate.init(e)})},deleteHandle:function(e){var t=this,a=e?[e]:this.dataListSelections.map(function(e){return e.faultid});this.$confirm("确定对[id="+a.join(",")+"]进行["+(e?"删除":"批量删除")+"]操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http({url:t.$http.adornUrl("/fenhuo/fenhuofault/delete"),method:"post",data:t.$http.adornData(a,!1)}).then(function(e){var a=e.data;a&&0===a.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.getDataList()}}):t.$message.error(a.msg)})})},confirmHandle:function(e){var t=this;this.$confirm("确定对[id="+e+"],进行确认维护操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http({url:t.$http.adornUrl("/fenhuo/fenhuofault/maintain/confirm"),method:"post",params:t.$http.adornParams({faultid:e})}).then(function(e){var a=e.data;a&&0===a.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.getDataList()}}):t.$message.error(a.msg)})})},updateOrDeleteIsEnabled:function(e){return 500!==e&&502!==e&&506!==e},handleClick:function(e,t){"0"===e.paneName?this.faultStatus=500:this.faultStatus=504,this.getDataList()},showfaultDetail:function(e){var t=this;this.detailVisible=!0,this.$nextTick(function(){t.$refs.detail.init(e)})},confirmMaintain:function(){var e=this;this.$http({url:this.$http.adornUrl("/fenhuo/fenhuofault/maintain/confirm"),method:"post",params:this.$http.adornParams({faultid:this.beginMaintainId})}).then(function(t){var a=t.data;a&&0===a.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.getDataList()}}):e.$message.error(a.msg),e.dialogVisible=!1})},fileshow:function(e){this.faultid=e}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mod-config"},[a("el-form",{attrs:{inline:!0,model:e.dataForm},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.getDataList()}}},[a("el-form-item",[a("el-select",{on:{change:e.projectchangeHandle},model:{value:e.seletcedProjectid,callback:function(t){e.seletcedProjectid=t},expression:"seletcedProjectid"}},e._l(e.projectmsgOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[e.isAuth("fenhuo:fenhuofault:save")?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addOrUpdateHandle()}}},[e._v("故障申报")]):e._e(),e._v(" "),e.isAuth("fenhuo:fenhuofault:delete")?a("el-button",{attrs:{type:"danger",disabled:e.dataListSelections.length<=0},on:{click:function(t){e.deleteHandle()}}},[e._v("批量删除")]):e._e()],1)],1),e._v(" "),a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick}},[a("el-tab-pane",{attrs:{label:"申报中"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList,border:""},on:{"selection-change":e.selectionChangeHandle}},[a("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectname","header-align":"center",align:"center",label:"项目名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"faulttypename","header-align":"center",align:"center",label:"故障类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"starttime","header-align":"center",align:"center",label:"开始时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"faultstatustxt","header-align":"center",align:"center",label:"故障状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"declarername","header-align":"center",align:"center",label:"申报人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"handlername","header-align":"center",align:"center",width:"100",label:"项目负责人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createtime","header-align":"center",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"故障文件",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("selectView",{attrs:{tabelTitle:"故障申报文件",faultid:t.row.faultid}},[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.fileshow(t.row.faultid)}}},[e._v("查看文件")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"160",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isAuth("fenhuo:fenhuofault:detail")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.showfaultDetail(t.row.faultid)}}},[e._v("查看详情")]):e._e(),e._v(" "),e.isAuth("fenhuo:fenhuofault:update")?a("el-button",{attrs:{disabled:e.updateOrDeleteIsEnabled(t.row.faultstatus),type:"text",size:"small"},on:{click:function(a){e.addOrUpdateHandle(t.row.faultid)}}},[e._v("修改")]):e._e(),e._v(" "),e.isAuth("fenhuo:fenhuofault:delete")?a("el-button",{attrs:{disabled:e.updateOrDeleteIsEnabled(t.row.faultstatus),type:"text",size:"small"},on:{click:function(a){e.deleteHandle(t.row.faultid)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"已确认"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList,border:""},on:{"selection-change":e.selectionChangeHandle}},[a("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectname","header-align":"center",align:"center",label:"项目名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"faulttypename","header-align":"center",align:"center",label:"故障类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"starttime","header-align":"center",align:"center",label:"开始时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"faultstatustxt","header-align":"center",align:"center",label:"故障状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"declarername","header-align":"center",align:"center",label:"申报人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"handlername","header-align":"center",align:"center",width:"100",label:"项目负责人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createtime","header-align":"center",align:"center",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"故障文件",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("selectView",{attrs:{tabelTitle:"故障申报文件",faultid:t.row.faultid}},[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.fileshow(t.row.faultid)}}},[e._v("查看文件")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"160",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isAuth("fenhuo:fenhuofault:detail")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.showfaultDetail(t.row.faultid)}}},[e._v("查看详情")]):e._e(),e._v(" "),e.isAuth("fenhuo:fenhuofault:update")?a("el-button",{attrs:{disabled:e.updateOrDeleteIsEnabled(t.row.faultstatus),type:"text",size:"small"},on:{click:function(a){e.addOrUpdateHandle(t.row.faultid)}}},[e._v("修改")]):e._e(),e._v(" "),e.isAuth("fenhuo:fenhuofault:delete")?a("el-button",{attrs:{disabled:e.updateOrDeleteIsEnabled(t.row.faultstatus),type:"text",size:"small"},on:{click:function(a){e.deleteHandle(t.row.faultid)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"申报详细信息",visible:e.dialogDetailVisible},on:{"update:visible":function(t){e.dialogDetailVisible=t}}}),e._v(" "),e.addOrUpdateVisible?a("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.getDataList}}):e._e(),e._v(" "),e.detailVisible?a("Detail",{ref:"detail"}):e._e()],1)},staticRenderFns:[]},s=a("46Yf")(o,r,!1,null,null,null);t.default=s.exports},ObGG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={props:["tabelTitle","faultid"],data:function(){return{dataList:[],pageIndex:1,pageSize:10,totalPage:0,dataForm:{key:""},multipleSelection:[],dataListLoading:!1,visible:!1}},methods:{init:function(){},showHandler:function(){this.getDataList()},hideHandler:function(){},getPageParams:function(){return{page:this.pageIndex,limit:this.pageSize,key:this.dataForm.key}},getDataList:function(e){var t=this;this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/fenhuo/file/faultlist"),method:"get",params:this.$http.adornParams({faultid:this.faultid,type:3,page:this.pageIndex,limit:this.pageSize,key:this.dataForm.key})}).then(function(e){var a=e.data;a&&0===a.code?(t.dataList=a.page.list,t.totalPage=a.page.totalCount):(t.dataList=[],t.totalPage=0),t.dataListLoading=!1})},downloadHandle:function(e,t){window.location.href=this.$http.adornUrl("/doc/fault_"+e+"/"+t)},sizeChangeHandle:function(e){this.pageSize=e,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(e){this.pageIndex=e,this.getDataList()}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-popover",{attrs:{placement:"top",title:e.tabelTitle,width:"1200",trigger:"click"},on:{hide:e.hideHandler,show:e.showHandler},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.dataList,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"createdatetime","header-align":"center",align:"center",width:"160",label:"项目创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"filename","header-align":"center",align:"center",width:"410",label:"文件名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"filetype","header-align":"center",align:"center",width:"120","show-overflow-tooltip":!0,label:"文件类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creator","header-align":"center",align:"center",width:"180","show-overflow-tooltip":!0,label:"上传人员"}}),e._v(" "),e.isAuth("fenhuo:fenhuoprojectinfo:update")?a("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isAuth("fenhuo:skillfile:download")?a("el-button",{attrs:{type:"text"},on:{click:function(a){e.downloadHandle(t.row.projectid,t.row.filename)}}},[e._v("下载")]):e._e()]}}])}):e._e()],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,20,50,100],"page-size":e.pageSize,total:e.totalPage,layout:"total, sizes, prev, pager, next, jumper, slot"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}}),e._v(" "),e._t("default",null,{slot:"reference"})],2)},staticRenderFns:[]};var n=a("46Yf")(l,i,!1,function(e){a("jJ6p")},"data-v-4bbee288",null);t.default=n.exports},jJ6p:function(e,t,a){var l=a("D2KK");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a("XkoO")("5cc39944",l,!0)}});